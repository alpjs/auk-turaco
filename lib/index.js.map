{"version":3,"sources":["../src/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import 'html-document/lib/global';\nimport $ from 'springbokjs-dom';\nglobal.React = global.$ = $;\nimport ComponentRenderer from 'turaco/lib/renderers/ComponentRenderer';\nimport ViewRenderer from 'turaco/lib/renderers/ViewRenderer';\n\nimport { Component, Fragment, View, Layout, TopLayout } from 'turaco';\n\nconst oldViewComponent = View.prototype.component;\n\nView.prototype.component = function (componentClass) {\n    return oldViewComponent.call(this, {\n        name: componentClass.name,\n        nameOrClass: componentClass,\n        context: this.context,\n    });\n};\n\nconst oldComponentComponent = Component.prototype.component;\n\nComponent.prototype.component = function (componentClass) {\n    return oldComponentComponent.call(this, {\n        name: componentClass.name,\n        nameOrClass: componentClass,\n        context: this.context,\n    });\n};\n\nViewRenderer.prototype._internalRender = function (sourceView, nameOrClass, properties, data) {\n    return this.createThenRender({\n        name: nameOrClass.name,\n        nameOrClass: nameOrClass,\n        context: sourceView.context,\n    }, properties, data);\n};\n\nexport { Component, Fragment, View, Layout, TopLayout };\n\nfunction instanceFactory(dirname, suffix) {\n    return ({ nameOrClass, context }) => {\n        if (nameOrClass === undefined) {\n            throw new Error('Cannot instanciate undefined');\n        }\n\n        if (typeof nameOrClass !== 'function') {\n            const path = dirname + nameOrClass + (suffix || '');\n            let nameOrClass = require(path);\n\n            if (typeof nameOrClass !== 'function') {\n                nameOrClass = nameOrClass.default;\n            }\n        }\n\n        // const instance = Object.create(nameOrClass.prototype);\n        // nameOrClass.call(instance);\n        const instance = new nameOrClass();// jscs:ignore requireCapitalizedConstructors\n        instance.context = context;\n        return instance;\n    };\n}\n\nexport default function aukTuraco(viewDirectory) {\n    return (app) => {\n        app.componentRenderer = new ComponentRenderer(\n            instanceFactory(viewDirectory + 'components/', 'Component')\n        );\n\n        app.viewRenderer = new ViewRenderer(\n            instanceFactory(viewDirectory, 'View'),\n            app.componentRenderer\n        );\n\n        app.context.render = function (View, properties, data) {\n            if (!View) {\n                throw new Error('View is undefined, class expected');\n            }\n\n            return this.app.viewRenderer.createThenRender({\n                name: View.name,\n                nameOrClass: View,\n                context: this,\n            }, properties, data)\n                .then(view => this.body = view.toHtmlString());\n        };\n    };\n}\n"]}